var path = require('path');

var grunt = null;

var depth = 0;

function recurseDirectory(source, files) {
    if (grunt.file.isDir(source)) {
        grunt.file.recurse(source, function (file, root, sub, name) {
            if (name === '.DS_Store') { return false; }
            
            if (sub) {
                var d = sub.split('/').length;

                if (d > depth) {
                    depth = d;
                }
            }
            
            recurseDirectory(file, files);
        });
    } else {
        files.push(source);
    }
}

exports.getFiles = function ($grunt, source) {
    grunt = $grunt;
    
    var files = [];
    
    recurseDirectory(source, files);
    
    return files;
};

exports.getDepth = function () {
    return depth;
};